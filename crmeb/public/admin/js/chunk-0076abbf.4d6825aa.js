(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-0076abbf"],{4553:function(e,t,i){"use strict";i.r(t);var o=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",[i("div",{staticClass:"mt20 ml20"},[i("Input",{staticClass:"perW35",attrs:{placeholder:"请输入视频链接"},model:{value:e.videoLink,callback:function(t){e.videoLink=t},expression:"videoLink"}}),i("input",{ref:"refid",staticStyle:{display:"none"},attrs:{type:"file"},on:{change:e.zh_uploadFile_change}}),"1"!==e.upload_type||e.videoLink?i("Button",{staticClass:"ml10",attrs:{type:"primary",icon:"ios-cloud-upload-outline"},on:{click:e.zh_uploadFile}},[e._v(e._s(e.videoLink?"确认添加":"上传视频"))]):e._e(),"1"!==e.upload_type||e.videoLink?e._e():i("Upload",{staticClass:"ml10",staticStyle:{display:"inline-block"},attrs:{"show-upload-list":!1,action:e.fileUrl,"before-upload":e.beforeUpload,data:e.uploadData,headers:e.header,multiple:!0,"on-success":e.handleSuccess}},[i("Button",{attrs:{type:"primary",icon:"ios-cloud-upload-outline"}},[e._v("上传视频")])],1),e.upload.videoIng?i("Progress",{attrs:{percent:e.progress,"stroke-width":5}}):e._e(),e.formValidate.video_link?i("div",{staticClass:"iview-video-style"},[i("video",{staticStyle:{width:"100%",height:"100% !important","border-radius":"10px"},attrs:{src:e.formValidate.video_link,controls:"controls"}},[e._v("\n        您的浏览器不支持 video 标签。\n      ")]),i("div",{staticClass:"mark"}),i("Icon",{staticClass:"iconv",attrs:{type:"ios-trash-outline"},on:{click:e.delVideo}})],1):e._e()],1),i("div",{staticClass:"mt50 ml20"},[i("Button",{attrs:{type:"primary"},on:{click:e.uploads}},[e._v("确认")])],1)])},a=[],n=i("c4c8"),s=i("d708"),r=i("c276"),l=(i("6bef"),{name:"vide11o",data:function(){return{fileUrl:s["a"].apiBaseURL+"/file/upload",upload:{videoIng:!1},progress:0,videoLink:"",formValidate:{video_link:""},upload_type:"",uploadData:{},header:{}}},created:function(){this.uploadType(),this.getToken()},methods:{delVideo:function(){var e=this;e.$set(e.formValidate,"video_link","")},uploadType:function(){var e=this;Object(n["G"])().then((function(t){e.upload_type=t.data.upload_type}))},handleSuccess:function(e,t,i){200===e.status?(this.formValidate.video_link=e.data.src,this.$Message.success(e.msg)):this.$Message.error(e.msg)},getToken:function(){this.header["Authori-zation"]="Bearer "+Object(r["d"])("token")},beforeUpload:function(){var e=this;this.uploadData={};var t=new Promise((function(t){e.$nextTick((function(){t(!0)}))}));return t},zh_uploadFile:function(){this.videoLink?this.formValidate.video_link=this.videoLink:this.$refs.refid.click()},zh_uploadFile_change:function(e){var t=this;if("video/mp4"!==e.target.files[0].type)return t.$Message.error("只能上传mp4文件");Object(n["s"])().then((function(i){t.$videoCloud.videoUpload({type:i.data.type,evfile:e,res:i,uploading:function(e,i){t.upload.videoIng=e}}).then((function(e){t.formValidate.video_link=e.url,t.$Message.success("视频上传成功")})).catch((function(e){t.$Message.error(e)}))}))},uploads:function(){nowEditor.editor.execCommand("inserthtml","<p><img/><video src='".concat(this.formValidate.video_link,"' controls></video><br/></p>")),nowEditor.dialog.close(!0)}}}),d=l,c=(i("f5e8"),i("2877")),u=Object(c["a"])(d,o,a,!1,null,"7a09d30e",null);t["default"]=u.exports},"6bef":function(e,t,i){"use strict";i("28a5"),i("a481");(function(){if(window.frameElement.id){var e=window.parent,t=e.$EDITORUI[window.frameElement.id.replace(/_iframe$/,"")],i=t.editor,o=e.UE,a=o.dom.domUtils,n=o.utils,s=(o.browser,o.ajax,function(e){return document.getElementById(e)});window.nowEditor={editor:i,dialog:t},n.loadFile(document,{href:i.options.themePath+i.options.theme+"/dialogbase.css?cache="+Math.random(),tag:"link",type:"text/css",rel:"stylesheet"});var r=i.getLang(t.className.split("-")[2]);r&&a.on(window,"load",(function(){var e=i.options.langPath+i.options.lang+"/images/";for(var t in r["static"]){var o=s(t);if(o){var l=o.tagName,d=r["static"][t];switch(d.src&&(d=n.extend({},d,!1),d.src=e+d.src),d.style&&(d=n.extend({},d,!1),d.style=d.style.replace(/url\s*\(/g,"url("+e)),l.toLowerCase()){case"var":o.parentNode.replaceChild(document.createTextNode(d),o);break;case"select":for(var c,u=o.options,p=0;c=u[p];)c.innerHTML=d.options[p++];for(var f in d)"options"!=f&&o.setAttribute(f,d[f]);break;default:a.setAttributes(o,d)}}}}))}})()},9145:function(e,t,i){},f5e8:function(e,t,i){"use strict";var o=i("9145"),a=i.n(o);a.a}}]);