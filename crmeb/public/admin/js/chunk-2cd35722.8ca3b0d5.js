(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-2cd35722"],{3150:function(e,t,a){},3353:function(e,t,a){"use strict";a.r(t);var r,n=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("div",{staticClass:"i-layout-page-header"},[a("div",{staticClass:"i-layout-page-header mb20"},[a("div",{staticClass:"i-layout-page-header"},[a("span",{staticClass:"ivu-page-header-title"},[e._v(e._s(e.$route.meta.title))])])])]),a("Card",{staticClass:"ivu-mt",attrs:{bordered:!1,"dis-hover":""}},[a("Form",{ref:"pagination",attrs:{model:e.pagination,"label-width":e.labelWidth,"label-position":e.labelPosition},nativeOn:{submit:function(e){e.preventDefault()}}},[a("Col",{staticClass:"ivu-text-left",attrs:{span:"24"}},[a("FormItem",{attrs:{label:"订单状态："}},[a("RadioGroup",{attrs:{type:"button"},on:{"on-change":function(t){return e.selectChange2(e.pagination.refund_type)}},model:{value:e.pagination.refund_type,callback:function(t){e.$set(e.pagination,"refund_type",t)},expression:"pagination.refund_type"}},e._l(e.num,(function(t,r){return a("Radio",{key:r,attrs:{label:r}},[e._v(e._s(t.name)+" "+e._s(t.num))])})),1)],1)],1),a("Row",{attrs:{type:"flex",gutter:24}},[a("Col",e._b({},"Col",e.grid,!1),[a("FormItem",{attrs:{label:"订单号：","label-for":"title"}},[a("Input",{attrs:{search:"","enter-button":"",placeholder:"请输入订单号"},on:{"on-search":e.orderSearch},model:{value:e.pagination.order_id,callback:function(t){e.$set(e.pagination,"order_id",t)},expression:"pagination.order_id"}})],1)],1),a("Col",{staticClass:"ivu-text-left",attrs:{span:"12"}},[a("FormItem",{attrs:{label:"退款时间："}},[a("DatePicker",{staticClass:"mr20",staticStyle:{width:"300px"},attrs:{editable:!1,value:e.timeVal,format:"yyyy/MM/dd",type:"daterange",placement:"bottom-start",placeholder:"请选择时间",options:e.options},on:{"on-change":e.onchangeTime}})],1)],1)],1)],1),a("Table",{ref:"table",staticClass:"mt25",attrs:{columns:e.thead,data:e.tbody,loading:e.loading,"highlight-row":"","no-userFrom-text":"暂无数据","no-filtered-userFrom-text":"暂无筛选结果"},scopedSlots:e._u([{key:"order_id",fn:function(t){var r=t.row;t.index;return[a("span",{staticStyle:{display:"block"},domProps:{textContent:e._s(r.order_id)}}),a("span",{directives:[{name:"show",rawName:"v-show",value:1===r.is_del,expression:"row.is_del === 1"}],staticStyle:{color:"#ed4014",display:"block"}},[e._v("用户已删除")])]}},{key:"user",fn:function(t){var r=t.row;t.index;return[a("div",[e._v("用户名："+e._s(r.nickname))]),a("div",[e._v("用户ID："+e._s(r.uid))])]}},{key:"refund_type",fn:function(t){var r=t.row;t.index;return[1==r.refund_type?a("div",[e._v("仅退款")]):2==r.refund_type?a("div",[e._v("退货退款")]):3==r.refund_type?a("div",[a("div",[e._v("拒绝退款")]),a("div",[e._v("原因："+e._s(r.refund_reason))])]):4==r.refund_type?a("div",[e._v("商品待退货")]):5==r.refund_type?a("div",[a("div",[e._v("退货待收货")]),a("div",[e._v("单号："+e._s(r.refund_express))])]):6==r.refund_type?a("div",[e._v("已退款")]):e._e()]}},{key:"info",fn:function(t){var r=t.row;t.index;return e._l(r._info,(function(t,r){return a("div",{key:r,staticClass:"tabBox"},[a("div",{directives:[{name:"viewer",rawName:"v-viewer"}],staticClass:"tabBox_img"},[a("img",{directives:[{name:"lazy",rawName:"v-lazy",value:t.cart_info.productInfo.attrInfo?t.cart_info.productInfo.attrInfo.image:t.cart_info.productInfo.image,expression:"\n                  val.cart_info.productInfo.attrInfo\n                    ? val.cart_info.productInfo.attrInfo.image\n                    : val.cart_info.productInfo.image\n                "}]})]),a("span",{staticClass:"tabBox_tit"},[e._v(e._s(t.cart_info.productInfo.store_name+" | ")+e._s(t.cart_info.productInfo.attrInfo?t.cart_info.productInfo.attrInfo.suk:""))]),a("span",{staticClass:"tabBox_pice"},[e._v(e._s("￥"+t.cart_info.truePrice+" x "+t.cart_info.cart_num))])])}))}},{key:"order_info",fn:function(t){var r=t.row;t.index;return[a("div",[e._v("订单金额："+e._s(r.pay_price))]),a("div",[e._v("付款方式："+e._s(r.pay_type_name))]),a("div",[e._v("\n            订单状态："),a("span",{domProps:{innerHTML:e._s(r.status_name.status_name)}})])]}},{key:"statusName",fn:function(t){var r=t.row;t.index;return[a("div",{staticClass:"pt5",domProps:{innerHTML:e._s(r.status_name.status_name)}}),a("div",{staticClass:"pictrue-box"},e._l(r.status_name.pics||[],(function(t,n){return r.status_name.pics?a("div",{directives:[{name:"viewer",rawName:"v-viewer"}],key:n},[a("img",{directives:[{name:"lazy",rawName:"v-lazy",value:t,expression:"item"}],staticClass:"pictrue mr10",attrs:{src:t}})]):e._e()})),0)]}},{key:"action",fn:function(t){var r=t.row;t.index;return[[a("Dropdown",{on:{"on-click":function(t){return e.changeMenu(r,t)}}},[a("a",{attrs:{href:"javascript:void(0)"}},[e._v("更多\n                "),a("Icon",{attrs:{type:"ios-arrow-down"}})],1),a("DropdownMenu",{attrs:{slot:"list"},slot:"list"},[a("DropdownItem",{directives:[{name:"show",rawName:"v-show",value:1===r._status&&0===r.paid&&"offline"===r.pay_type,expression:"\n                    row._status === 1 &&\n                    row.paid === 0 &&\n                    row.pay_type === 'offline'\n                  "}],ref:"ones",attrs:{name:"1"}},[e._v("立即支付")]),a("DropdownItem",{attrs:{name:"2"}},[e._v("订单详情")]),a("DropdownItem",{attrs:{name:"3"}},[e._v("订单记录")]),a("DropdownItem",{directives:[{name:"show",rawName:"v-show",value:1!==r._status||3===r._status&&r.use_integral>0&&r.use_integral>=r.back_integral,expression:"\n                    row._status !== 1 ||\n                    (row._status === 3 &&\n                      row.use_integral > 0 &&\n                      row.use_integral >= row.back_integral)\n                  "}],attrs:{name:"4"}},[e._v("订单备注")]),a("DropdownItem",{directives:[{name:"show",rawName:"v-show",value:1!==r._status&&(parseFloat(r.pay_price)>parseFloat(r.refund_price)||0==r.pay_price&&-1!==[0,1].indexOf(r.refund_status)),expression:"\n                    row._status !== 1 &&\n                    (parseFloat(row.pay_price) > parseFloat(row.refund_price) ||\n                      (row.pay_price == 0 &&\n                        [0, 1].indexOf(row.refund_status) !== -1))\n                  "}],attrs:{name:"5"}},[e._v(e._s(2==r.refund_type?"退货退款":"立即退款"))]),a("DropdownItem",{directives:[{name:"show",rawName:"v-show",value:3===r._status,expression:"row._status === 3"}],attrs:{name:"7"}},[e._v("不退款")]),a("DropdownItem",{directives:[{name:"show",rawName:"v-show",value:4===r._status,expression:"row._status === 4"}],attrs:{name:"8"}},[e._v("已收货")]),a("DropdownItem",{attrs:{name:"9"}},[e._v("删除订单")])],1)],1)]]}}])}),a("div",{staticClass:"acea-row row-right page"},[a("Page",{attrs:{total:e.total,current:e.pagination.page,"show-elevator":"","show-total":"","page-size":e.pagination.limit},on:{"on-change":e.pageChange}})],1)],1),a("edit-from",{ref:"edits",attrs:{FromData:e.FromData},on:{submitFail:e.submitFail}}),a("details-from",{ref:"detailss",attrs:{orderDatalist:e.orderDatalist,orderId:e.orderId}}),a("order-remark",{ref:"remarks",attrs:{orderId:e.orderId},on:{submitFail:e.submitFail}}),a("order-record",{ref:"record"})],1)},i=[],s=(a("8e6e"),a("ac6a"),a("456d"),a("96cf"),a("3b8d")),o=a("bd86"),d=a("2f62"),c=a("f8b7"),u=a("31b4"),l=a("fc48"),f=a("61f8"),m=a("417c");function p(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,r)}return a}function g(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?p(Object(a),!0).forEach((function(t){Object(o["a"])(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):p(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}var h={components:{editFrom:u["a"],detailsFrom:l["a"],orderRemark:f["a"],orderRecord:m["a"]},data:function(){return{grid:{xl:7,lg:7,md:12,sm:24,xs:24},thead:[{title:"订单号",align:"center",slot:"order_id",minWidth:150},{title:"用户信息",key:"nickname",minWidth:100},{title:"商品信息",slot:"info",minWidth:330},{title:"实际支付",key:"pay_price",minWidth:70},{title:"发起退款时间",key:"_refund_time",minWidth:100},{title:"退款状态",slot:"refund_type",minWidth:100},{title:"退款信息",slot:"statusName",minWidth:120},{title:"操作",slot:"action",fixed:"right",minWidth:150,align:"center"}],tbody:[],num:[],orderDatalist:null,loading:!1,FromData:null,total:0,orderId:0,animal:1,pagination:{page:1,limit:15,order_id:"",time:"",refund_type:0},options:{shortcuts:[{text:"今天",value:function(){var e=new Date,t=new Date;return t.setTime(new Date((new Date).getFullYear(),(new Date).getMonth(),(new Date).getDate())),[t,e]}},{text:"昨天",value:function(){var e=new Date,t=new Date;return t.setTime(t.setTime(new Date((new Date).getFullYear(),(new Date).getMonth(),(new Date).getDate()-1))),e.setTime(e.setTime(new Date((new Date).getFullYear(),(new Date).getMonth(),(new Date).getDate()-1))),[t,e]}},{text:"最近7天",value:function(){var e=new Date,t=new Date;return t.setTime(t.setTime(new Date((new Date).getFullYear(),(new Date).getMonth(),(new Date).getDate()-6))),[t,e]}},{text:"最近30天",value:function(){var e=new Date,t=new Date;return t.setTime(t.setTime(new Date((new Date).getFullYear(),(new Date).getMonth(),(new Date).getDate()-29))),[t,e]}},{text:"本月",value:function(){var e=new Date,t=new Date;return t.setTime(t.setTime(new Date((new Date).getFullYear(),(new Date).getMonth(),1))),[t,e]}},{text:"本年",value:function(){var e=new Date,t=new Date;return t.setTime(t.setTime(new Date((new Date).getFullYear(),0,1))),[t,e]}}]},timeVal:[],modal:!1,qrcode:null,name:"",spin:!1}},computed:g(g({},Object(d["e"])("order",["orderChartType"])),{},{labelWidth:function(){return this.isMobile?void 0:75},labelPosition:function(){return this.isMobile?"top":"right"}}),created:function(){this.getOrderList()},methods:(r={onchangeCode:function(e){this.animal=e,this.qrcodeShow()},onchangeTime:function(e){this.pagination.page=1,this.timeVal=e,this.pagination.time=this.timeVal[0]?this.timeVal.join("-"):"",this.getOrderList()},getData:function(e){var t=this;Object(c["e"])(e).then(function(){var e=Object(s["a"])(regeneratorRuntime.mark((function e(a){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(t.$refs.detailss.modals=!0,t.orderDatalist=a.data,t.orderDatalist.orderInfo.refund_reason_wap_img)try{t.orderDatalist.orderInfo.refund_reason_wap_img=JSON.parse(t.orderDatalist.orderInfo.refund_reason_wap_img)}catch(r){t.orderDatalist.orderInfo.refund_reason_wap_img=[]}case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()).catch((function(e){t.$Message.error(e.msg)}))},changeMenu:function(e,t){var a=this;switch(this.orderId=e.id,t){case"1":this.delfromData={title:"修改立即支付",url:"/order/pay_offline/".concat(e.id),method:"post",ids:""},this.$modalSure(this.delfromData).then((function(e){a.$Message.success(e.msg),a.getOrderList()})).catch((function(e){a.$Message.error(e.msg)}));break;case"2":this.getData(e.id);break;case"3":this.$refs.record.modals=!0,this.$refs.record.getList(e.id);break;case"4":this.$refs.remarks.modals=!0;break;case"5":this.getRefundData(e.id,e.refund_type);break;case"6":this.getRefundIntegral(e.id);break;case"7":this.getNoRefundData(e.id);break;case"8":this.delfromData={title:"修改确认收货",url:"/order/take/".concat(e.id),method:"put",ids:""},this.$modalSure(this.delfromData).then((function(e){a.$Message.success(e.msg),a.getOrderList()})).catch((function(e){a.$Message.error(e.msg)}));break;case"10":this.delfromData={title:"立即打印订单",info:"您确认打印此订单吗?",url:"/order/print/".concat(e.id),method:"get",ids:""},this.$modalSure(this.delfromData).then((function(e){a.$Message.success(e.msg),a.$emit("changeGetTabs"),a.getOrderList()})).catch((function(e){a.$Message.error(e.msg)}));break;case"11":this.delfromData={title:"立即打印电子面单",info:"您确认打印此电子面单吗?",url:"/order/order_dump/".concat(e.id),method:"get",ids:""},this.$modalSure(this.delfromData).then((function(e){a.$Message.success(e.msg),a.getOrderList()})).catch((function(e){a.$Message.error(e.msg)}));break;default:this.delfromData={title:"删除订单",url:"/order/del/".concat(e.id),method:"DELETE",ids:""},this.delOrder(e,this.delfromData)}},getRefundData:function(e,t){var a=this;2==t?(this.delfromData={title:"是否立即退货退款",url:"/refund/agree/".concat(e),method:"get"},this.$modalSure(this.delfromData).then((function(e){a.$Message.success(e.msg),a.getOrderList()})).catch((function(e){a.$Message.error(e.msg)}))):this.$modalForm(Object(c["l"])(e)).then((function(){a.getOrderList(),a.$emit("changeGetTabs")}))},getRefundIntegral:function(e){var t=this;Object(c["J"])(e).then(function(){var e=Object(s["a"])(regeneratorRuntime.mark((function e(a){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:t.FromData=a.data,t.$refs.edits.modals=!0;case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()).catch((function(e){t.$Message.error(e.msg)}))}},Object(o["a"])(r,"getData",(function(e){var t=this;Object(c["e"])(e).then(function(){var e=Object(s["a"])(regeneratorRuntime.mark((function e(a){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(t.$refs.detailss.modals=!0,t.orderDatalist=a.data,t.orderDatalist.orderInfo.refund_reason_wap_img)try{t.orderDatalist.orderInfo.refund_reason_wap_img=JSON.parse(t.orderDatalist.orderInfo.refund_reason_wap_img)}catch(r){t.orderDatalist.orderInfo.refund_reason_wap_img=[]}case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()).catch((function(e){t.$Message.error(e.msg)}))})),Object(o["a"])(r,"delOrder",(function(e,t){var a=this;if(1===e.is_del)this.$modalSure(t).then((function(e){a.$Message.success(e.msg),a.getOrderList()})).catch((function(e){a.$Message.error(e.msg)}));else{var r="错误！",n="<p>您选择的的订单存在用户未删除的订单，无法删除用户未删除的订单！</p>";this.$Modal.error({title:r,content:n})}})),Object(o["a"])(r,"submitFail",(function(){this.getOrderList()})),Object(o["a"])(r,"selectChange2",(function(e){this.pagination.page=1,this.pagination.refund_type=e,this.getOrderList(e)})),Object(o["a"])(r,"getNoRefundData",(function(e){var t=this;this.$modalForm(Object(c["m"])(e)).then((function(){t.getOrderList(),t.$emit("changeGetTabs")}))})),Object(o["a"])(r,"getOrderList",(function(){var e=this;this.loading=!0,Object(c["z"])(this.pagination).then((function(t){e.loading=!1;var a=t.data,r=a.count,n=a.list,i=a.num;e.total=r,e.tbody=n,e.num=i})).catch((function(t){e.loading=!1,e.$Message.error(t.msg)}))})),Object(o["a"])(r,"pageChange",(function(e){this.pagination.page=e,this.getOrderList()})),Object(o["a"])(r,"nameSearch",(function(){this.pagination.page=1,this.getOrderList()})),Object(o["a"])(r,"orderSearch",(function(){this.pagination.page=1,this.getOrderList()})),Object(o["a"])(r,"delivery",(function(e){var t=this;Object(c["f"])(e.id).then(function(){var e=Object(s["a"])(regeneratorRuntime.mark((function e(a){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:t.FromData=a.data,t.$refs.edits.modals=!0;case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()).catch((function(e){t.$Message.error(e.msg)}))})),r)},_=h,v=(a("a5de"),a("2877")),w=Object(v["a"])(_,n,i,!1,null,"77e130ba",null);t["default"]=w.exports},a5de:function(e,t,a){"use strict";var r=a("3150"),n=a.n(r);n.a}}]);